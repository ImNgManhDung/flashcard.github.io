<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            overflow: hidden;
        }

        .quiz-container {
            width: 1359px;
            height: 190px;
            background: white;
            border: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }

        /* Top Header - Compact */
        .top-header {
            background: linear-gradient(135deg, #00c851, #007e33);
            color: white;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 40px;
        }

        .left-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .project-info {
            font-size: 12px;
            font-weight: 500;
        }

        .project-selector {
            position: relative;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .choose-project-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            transition: background 0.2s;
        }

        .choose-project-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .go-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            font-weight: 600;
        }

        .go-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .center-section {
            display: flex;
            align-items: center;
        }

        .timer {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            font-weight: bold;
            padding: 4px 10px;
            background: rgba(255,255,255,0.15);
            border-radius: 4px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .timer.warning {
            background: #ff4444;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .right-section {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .header-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 4px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .header-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .header-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .icon-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 4px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
        }

        .icon-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Step Progress Bar - Compact */
        .step-progress {
            background: white;
            padding: 8px;
            display: flex;
            justify-content: center;
            gap: 1px;
            height: 32px;
            border-bottom: 1px solid #e9ecef;
        }

        .step {
            width: 40px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .step.active {
            background: #333;
            color: white;
        }

        .step.completed {
            background: #28a745;
            color: white;
        }

        .step.review {
            background: #ffc107;
            color: #333;
        }

        .step:not(.active):not(.completed):not(.review) {
            background: #e9ecef;
            color: #6c757d;
        }

        .step:hover:not(.active) {
            background: #dee2e6;
        }

        /* Question Area - More Compact */
        .question-area {
            flex: 1;
            background: white;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            position: relative;
            min-height: 50px;
        }

        .question-text {
            font-size: 13px;
            line-height: 1.4;
            color: #333;
            width: 100%;
            text-align: left;
        }

        .task-status {
            position: absolute;
            top: 8px;
            right: 15px;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 500;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-review {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        /* Bottom Controls - Compact */
        .bottom-controls {
            background: #f8f9fa;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-top: 1px solid #e9ecef;
            height: 40px;
        }

        .control-btn {
            padding: 4px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
            height: 28px;
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-previous {
            background: #6c757d;
            color: white;
        }

        .btn-previous:hover:not(:disabled) {
            background: #5a6268;
        }

        .btn-completed {
            background: #28a745;
            color: white;
        }

        .btn-completed:hover {
            background: #218838;
        }

        .btn-review {
            background: #ffc107;
            color: #212529;
        }

        .btn-review:hover {
            background: #e0a800;
        }

        .btn-next {
            background: #007bff;
            color: white;
        }

        .btn-next:hover:not(:disabled) {
            background: #0056b3;
        }

        .btn-help {
            background: #17a2b8;
            color: white;
            padding: 4px;
            width: 28px;
            height: 28px;
            justify-content: center;
            border-radius: 50%;
        }

        .btn-help:hover {
            background: #138496;
        }

        .center-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Project dropdown */
        .project-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 200px;
            z-index: 1000;
            display: none;
        }

        .project-dropdown.show {
            display: block;
        }

        .project-option {
            padding: 8px 12px;
            color: #333;
            cursor: pointer;
            font-size: 11px;
            border-bottom: 1px solid #eee;
        }

        .project-option:hover {
            background: #f8f9fa;
        }

        .project-option:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <!-- Top Header -->
        <div class="top-header">
            <div class="left-section">
                <div class="project-info">
                    Project <span id="currentProject">1</span> of <span id="totalProjects">12</span>
                </div>
                
                <div class="project-selector">
                    <button class="choose-project-btn" onclick="toggleProjectDropdown()">
                        Choose Project ▼
                    </button>
                    <button class="go-btn">Go</button>
                    
                    <div class="project-dropdown" id="projectDropdown">
                        <div class="project-option" onclick="selectProject(1)">Project 1: Data1_Tuan4 </div>
                        <div class="project-option" onclick="selectProject(2)">Project 2: Data1_Tuan4 </div>
                        <div class="project-option" onclick="selectProject(3)">Project 3: Data1_Tuan5</div>
                        <div class="project-option" onclick="selectProject(4)">Project 4: Data1_Tuan5</div>
                        <div class="project-option" onclick="selectProject(5)">Project 5: </div>
                        <div class="project-option" onclick="selectProject(6)">Project 6: </div>
                        <div class="project-option" onclick="selectProject(7)">Project 7: </div>
                    </div>
                </div>
            </div>

            <div class="center-section">
                <div class="timer" id="timer">4:58:11</div>
            </div>

            <div class="right-section">
                <button class="header-btn" onclick="nextProject()">Next Project</button>
                <button class="header-btn" onclick="restartProject()">Restart Project</button>
                <button class="icon-btn">✓</button>
                <button class="icon-btn">✕</button>
            </div>
        </div>

        <!-- Step Progress Bar -->
        <div class="step-progress">
            <div class="step active" id="step1" onclick="goToStep(1)">1</div>
            <div class="step" id="step2" onclick="goToStep(2)">2</div>
            <div class="step" id="step3" onclick="goToStep(3)">3</div>
            <div class="step" id="step4" onclick="goToStep(4)">4</div>
            <div class="step" id="step5" onclick="goToStep(5)">5</div>
            <div class="step" id="step6" onclick="goToStep(6)">6</div>
        </div>

        <!-- Question Area -->
        <div class="question-area">
            <div class="question-text" id="questionText">
                
            </div>
            <div class="task-status status-review" id="taskStatus" style="display: none;">
                Marked for Review
            </div>
        </div>

        <!-- Bottom Controls -->
        <div class="bottom-controls">
            <button class="control-btn btn-previous" onclick="previousTask()" id="prevBtn">
                ◀ Previous Task
            </button>

            <div class="center-controls">
                <button class="control-btn btn-completed" onclick="markCompleted()">
                    Mark Completed
                </button>
                <button class="control-btn btn-review" onclick="markForReview()">
                    Mark for review
                </button>
                <button class="control-btn btn-help" onclick="showHelp()">
                    ?
                </button>
            </div>

            <button class="control-btn btn-next" onclick="nextTask()" id="nextBtn">
                Next Task ▶
            </button>
        </div>
    </div>

    <script>
        // Data structure - 7 Projects
        const quizData1 = {
            projects: [
                {
                    id: 1,
                    title: "Project 1",
                    tasks: [
                        "Chèn nội dung từ tập tin History.docx vào văn bản ở vị trí giữa đoạn“Lịch sử ra đời iPhone” và đoạn “Bảng giá iPhone chính hãng”",
                        "Chèn ký tự đặc biệt Trade Mark vào sau chữ “iPhone” ở đầu văn bản.",
                        "Lưu văn bản với tên iPhone sao	cho	tương thích	với các phiên bản cũ hơn",
                        "Kiểm tra văn bản và xóa các thông tin thuộc tính và thông tin cá nhân trong văn bản",
                        "Thêm thuộc tính tiêu đề (Title) với nội dung “iPhone” cho	văn	bản",
                        "Thiết lập	Word để hiển thị ký tự định dạng tab đoạn trong	văn	bản nhưng không hiển thị các loại kí tự khác."
                    ]
                },
                {
                    id: 2,
                    title: "Word Processing",
                       tasks: [
                        "Thay	đổi	hướng trang của trang đầu tiên thành Landscape.",
                        "Áp dụng chủ đề Metropolitancho	văn	bản.",
                        "Thêm watermark	cho	văn	bản với nội dung “Xách	balo	lên	và	đi”, chữ nằm ngang, kích cỡ chữ 54, kiểu chữ Times New Roman.",
                        "Đổi kiểu chữ của chủ đề thành CalibriLight-Constantia",
                        "Viền trang văn	bản với kiểu khung viền là Shadow, màu khung Gold, Accent 1, Lighter 40%,	độ dầy viền là 3pt và đường viền	được tính tới chữ (Measure from Text).",
                        "[]"
                    ]
                    
                },
                {
                    id: 3,
                    title: "PowerPoint Presentation",
                  
                    tasks: [
                        "Sắp xếp bảng theo cột \"Division\" theo thứ tự tăng dần.",
                        "Làm cho các tiêu đề của bảng \"Division\" lặp lại ở trang thứ hai.",
                        "Ở trang 2, tạo một bảng từ đoạn văn bản \"Ontario\" đến \"Oshawa\". Tạo bảng được tách cột bằng dấu tab và trải rộng hết chiều ngang cửa sổ.",
                        "Ở trang 2, bên phải tiêu đề \"Places to Play\", chèn một chú thích (footnote) với nội dung: \"We will be adding more locations soon!\"",
                        "Bên dưới tiêu đề \"Our motto\", thêm một sơ đồ \Closed Chevron Process\. Từ trái sang phải, chèn vào sơ đồ các nội dung: \"Make friends\", \"Play safe\", \"Have fun\".",
                        "Thêm văn bản \"Hokaido\" vào thuộc tính Subject của tài liệu này."
                    ]
                },
                {
                    id: 4,
                    title: "Access Database",
                    tasks: [
                        "Tạo database mới và thiết kế bảng Customers",
                        "Định nghĩa relationships giữa các bảng",
                        "Tạo form nhập liệu cho bảng Products",
                        "Thiết kế query để tìm kiếm dữ liệu",
                        "Tạo report hiển thị thống kê doanh số",
                        "Backup database và thiết lập security"
                    ]
                },
                {
                    id: 5,
                    title: "Web Design HTML/CSS",
                    tasks: [
                        "Tạo cấu trúc HTML cho trang chủ website",
                        "Thiết kế CSS layout với responsive design",
                        "Thêm navigation menu và footer",
                        "Tạo form liên hệ với validation",
                        "Tối ưu hóa images và SEO meta tags",
                        "Test website trên multiple browsers"
                    ]
                },
                {
                    id: 6,
                    title: "Email Marketing",
                    tasks: [
                        "Thiết kế email template với HTML",
                        "Tạo subject line và preview text",
                        "Thêm call-to-action buttons",
                        "Setup tracking và analytics",
                        "Test email trên different email clients",
                        "Schedule và send email campaign"
                    ]
                },
                {
                    id: 7,
                    title: "Data Analysis",
                    tasks: [
                        "Import dữ liệu từ CSV file",
                        "Làm sạch và chuẩn hóa dữ liệu",
                        "Tạo pivot tables để phân tích",
                        "Thiết kế dashboard với charts",
                        "Áp dụng statistical analysis",
                        "Export báo cáo final report"
                    ]
                }
            ]
        };


let quizData = {};


    fetch('data.json')
        .then(res => res.json())
        .then(data => {
            quizData = data;
           
        })
        .catch(err => console.error('Lỗi tải dữ liệu:', err));

   




        // State management
        let currentProjectIndex = 0;    // Start from project 1
        let currentTaskIndex = 0;       // Start from task 1
        let taskStatuses = {};          // Store task statuses
        let timeLeft = 50*60;           // 50 minutes timer

        // Initialize
        function init() {
            updateDisplay();
            startTimer();
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.project-selector')) {
                    document.getElementById('projectDropdown').classList.remove('show');
                }
            });
        }

        // Timer functions
        function startTimer() {
            setInterval(() => {
                timeLeft--;
                if (timeLeft <= 0) {
                    timeLeft = 0;
                }
                updateTimer();
            }, 1000);
        }

        function updateTimer() {
            const hours = Math.floor(timeLeft / 3600);
            const minutes = Math.floor((timeLeft % 3600) / 60);
            const seconds = timeLeft % 60;
            
            const timeString = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            const timerEl = document.getElementById('timer');
            timerEl.textContent = timeString;
            
            // Warning when less than 5 minutes
            if (timeLeft < 300) {
                timerEl.classList.add('warning');
            }
        }

        // Display update functions
        function updateDisplay() {
            // Update project info
            document.getElementById('currentProject').textContent = currentProjectIndex + 1;
            document.getElementById('totalProjects').textContent = quizData.projects.length;
            
            // Update question
            const currentProject = quizData.projects[currentProjectIndex];
            const currentTask = currentProject.tasks[currentTaskIndex];
            document.getElementById('questionText').textContent = currentTask;
            
            // Update step progress
            updateStepProgress();
            
            // Update button states
            updateButtonStates();
            
            // Update task status display
            updateTaskStatusDisplay();
        }

        function updateStepProgress() {
            const currentProject = quizData.projects[currentProjectIndex];
            const totalSteps = currentProject.tasks.length;
            
            for (let i = 1; i <= 6; i++) {
                const stepEl = document.getElementById(`step${i}`);
                const stepIndex = i - 1;
                
                if (i > totalSteps) {
                    stepEl.style.display = 'none';
                } else {
                    stepEl.style.display = 'flex';
                    stepEl.className = 'step';
                    
                    const status = getTaskStatus(currentProjectIndex, stepIndex);
                    
                    if (stepIndex === currentTaskIndex) {
                        stepEl.classList.add('active');
                    } else if (status === 'completed') {
                        stepEl.classList.add('completed');
                    } else if (status === 'review') {
                        stepEl.classList.add('review');
                    }
                }
            }
        }

        function updateButtonStates() {
            const currentProject = quizData.projects[currentProjectIndex];
            
            // Previous/Next task buttons
            document.getElementById('prevBtn').disabled = currentTaskIndex === 0;
            document.getElementById('nextBtn').disabled = currentTaskIndex >= currentProject.tasks.length - 1;
        }

        function updateTaskStatusDisplay() {
            const statusEl = document.getElementById('taskStatus');
            const status = getTaskStatus(currentProjectIndex, currentTaskIndex);
            
            if (status === 'completed') {
                statusEl.textContent = 'Completed';
                statusEl.className = 'task-status status-completed';
                statusEl.style.display = 'block';
            } else if (status === 'review') {
                statusEl.textContent = 'Marked for Review';
                statusEl.className = 'task-status status-review';
                statusEl.style.display = 'block';
            } else {
                statusEl.style.display = 'none';
            }
        }

        // Task status management
        function getTaskStatus(projectIndex, taskIndex) {
            return taskStatuses[`${projectIndex}-${taskIndex}`] || null;
        }

        function setTaskStatus(projectIndex, taskIndex, status) {
            taskStatuses[`${projectIndex}-${taskIndex}`] = status;
        }

        // Navigation functions
        function previousTask() {
            if (currentTaskIndex > 0) {
                currentTaskIndex--;
                updateDisplay();
            }
        }

        function nextTask() {
            const currentProject = quizData.projects[currentProjectIndex];
            if (currentTaskIndex < currentProject.tasks.length - 1) {
                currentTaskIndex++;
                updateDisplay();
            }
        }

        function goToStep(stepNumber) {
            const stepIndex = stepNumber - 1;
            const currentProject = quizData.projects[currentProjectIndex];
            
            if (stepIndex >= 0 && stepIndex < currentProject.tasks.length) {
                currentTaskIndex = stepIndex;
                updateDisplay();
            }
        }

        function nextProject() {
            if (currentProjectIndex < quizData.projects.length - 1) {
                currentProjectIndex++;
                currentTaskIndex = 0;
                updateDisplay();
            }
        }

        function restartProject() {
            // Clear all statuses for current project
            const currentProject = quizData.projects[currentProjectIndex];
            for (let i = 0; i < currentProject.tasks.length; i++) {
                delete taskStatuses[`${currentProjectIndex}-${i}`];
            }
            
            currentTaskIndex = 0;
            updateDisplay();
        }

        // Project selector functions
        function toggleProjectDropdown() {
            const dropdown = document.getElementById('projectDropdown');
            dropdown.classList.toggle('show');
        }

        function selectProject(projectNumber) {
            currentProjectIndex = projectNumber - 1;
            currentTaskIndex = 0;
            updateDisplay();
            
            document.getElementById('projectDropdown').classList.remove('show');
        }

        // Task action functions
        function markCompleted() {
            const currentStatus = getTaskStatus(currentProjectIndex, currentTaskIndex);
            
            if (currentStatus === 'completed') {
                // If already completed, remove the status
                delete taskStatuses[`${currentProjectIndex}-${currentTaskIndex}`];
            } else {
                // Mark as completed
                setTaskStatus(currentProjectIndex, currentTaskIndex, 'completed');
            }
            updateDisplay();
        }

        function markForReview() {
            const currentStatus = getTaskStatus(currentProjectIndex, currentTaskIndex);
            
            if (currentStatus === 'review') {
                // If already marked for review, remove the status
                delete taskStatuses[`${currentProjectIndex}-${currentTaskIndex}`];
            } else {
                // Mark for review
                setTaskStatus(currentProjectIndex, currentTaskIndex, 'review');
            }
            updateDisplay();
        }

        function showHelp() {
            alert('Help: Hướng dẫn chi tiết cho câu hỏi hiện tại sẽ được hiển thị ở đây.');
        }

        // Initialize when page loads
        window.onload = init;
    </script>
</body>
</html>